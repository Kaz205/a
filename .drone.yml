---
clone:
  depth: 1
kind: pipeline
name: pipe
steps:
  - name: build
    image: atomxorg/arch-linux:kernel
    commands:
      - curl -O https://pkgbuild.com/~morganamilo/pacman-static/x86_64/bin/pacman-static && mv pacman-static /usr/bin/pacman-static && chmod 755 /usr/bin/pacman-static
      - curl -O https://archlinux.org/packages/core/x86_64/inetutils/download/
      - curl -O https://archlinux.org/packages/core/x86_64/python2/download/
      - pacman-static -U *.zst --noconfirm
      - export CLANG_VERSION=clang-r458507
      - git clone https://github.com/arter97/arm32-gcc/ --depth=1 -j$(nproc --all)
      - git clone https://github.com/arter97/arm64-gcc/ --depth=1 -j$(nproc --all)
      - wget https://github.com/Kaz205/clang-releases/releases/download/$CLANG_VERSION/$CLANG_VERSION.tar.xz
      - tar -I xz -xf $CLANG_VERSION.tar.xz && mv $CLANG_VERSION google-clang
      - git clone https://github.com/Kaz205/AnyKernel3 -b renoir --depth=1
      - ./drone.sh
      - curl bashupload.com -T AnyKernel3/*.zip
      - curl -i -T AnyKernel3/*.zip https://oshi.at

